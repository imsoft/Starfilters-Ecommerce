---
import FeatureServiceSection from "@/components/shared/FeatureServiceSection.astro";
import ServicesCTA from "@/components/shared/ServicesCTA.astro";
import WebsiteLayout from "@/layouts/websiteLayout.astro";
import SEO from "@/components/shared/SEO.astro";
import { generateBreadcrumbSchema } from "@/lib/seo-utils";
import { getLangFromUrl } from "@/i18n/utils";

export const prerender = false;

const lang = getLangFromUrl(Astro.url);
const siteUrl = Astro.site?.href || Astro.url.origin;
const breadcrumbSchema = generateBreadcrumbSchema([
  { name: lang === 'en' ? 'Home' : 'Inicio', url: siteUrl },
  { name: lang === 'en' ? 'Services' : 'Servicios', url: `${siteUrl}${lang === 'en' ? '/en/services' : '/servicios'}` }
]);
---

<WebsiteLayout
  title={lang === 'en' ? 'Services' : 'Servicios'}
  seoTitle={lang === 'en' ? 'Cleanroom Certification and Performance Testing Services | Star Filters' : 'Servicios de Pruebas y Validación de Desempeño en Cuartos Limpios | Star Filters'}
  description={lang === 'en' ? 'Cleanroom performance testing to ensure controlled areas operate under optimal conditions. Air and filtration system validation in Mexico.' : 'Pruebas de desempeño para cuartos limpios y áreas controladas conforme a los más altos estándares de la industria. Validación de sistemas de aire y filtración en México.'}
  keywords={lang === 'en' ? [
    'cleanroom testing',
    'cleanroom certification',
    'ISO 14644 validation',
    'HEPA filter testing',
    'particle count testing',
    'air balancing'
  ] : [
    'pruebas de cuartos limpios',
    'certificación cuartos limpios',
    'validación ISO 14644',
    'pruebas de filtros HEPA',
    'conteo de partículas',
    'balanceo de aire'
  ]}
>
  <SEO
    slot="seo"
    title={lang === 'en' ? 'Cleanroom Certification and Performance Testing Services' : 'Servicios de Pruebas y Validación de Desempeño en Cuartos Limpios'}
    description={lang === 'en' ? 'Cleanroom performance testing to ensure controlled areas operate under optimal conditions. Air and filtration system validation in Mexico.' : 'Pruebas de desempeño para cuartos limpios y áreas controladas conforme a los más altos estándares de la industria. Validación de sistemas de aire y filtración en México.'}
    ogType="website"
    keywords={lang === 'en' ? [
      'cleanroom testing',
      'cleanroom certification',
      'ISO 14644 validation'
    ] : [
      'pruebas de cuartos limpios',
      'certificación cuartos limpios',
      'validación ISO 14644'
    ]}
  />

  <script slot="seo" type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} is:inline />
  <FeatureServiceSection />
  <ServicesCTA />
</WebsiteLayout>
