---
import '../../styles/global.css';
import SEO from '@/components/shared/SEO.astro';
import HeroSection from '@/components/shared/HeroSection.astro';
import Stats from '@/components/shared/Stats.astro';
import BentoGrid from '@/components/shared/BentoGrid.astro';
import IndustriesBenefitSection from '@/components/shared/IndustriesBenefitSection.astro';
import LogoSection from '@/components/shared/LogoSection.astro';
import CertificationSection from '@/components/shared/CertificationSection.astro';
import TestimonialSections from '@/components/shared/TestimonialSections.astro';
import FaqSection from '@/components/shared/FaqSection.astro';
import FooterSection from '@/components/shared/FooterSection.astro';
import WhatsAppButton from '@/components/shared/WhatsAppButton.astro';
import { generateOrganizationSchema, generateFAQSchema } from '@/lib/seo-utils';
import { useTranslations } from '@/i18n/utils';

const siteUrl = Astro.site?.href || Astro.url.origin;
const t = useTranslations('en');

// Generar FAQs para schema
const faqs = Array.from({ length: 7 }, (_, index) => {
  const question = t(`faq.q${index + 1}`);
  const answer = t(`faq.a${index + 1}`);
  return question && answer ? { question, answer } : null;
}).filter(Boolean);

const faqSchema = generateFAQSchema(faqs);
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />

		<SEO
			title="Cleanroom and Industrial Filter Leader | Star Filters"
			description="With over 40 years of experience, Star Filters is a leader in cleanroom design and construction, HEPA filters, and industrial filtration systems in North America. NEBB validation, certified quality, and professional technical support."
			ogType="website"
			keywords={[
				'industrial filters',
				'HEPA filters',
				'cleanrooms',
				'air purification',
				'filters Mexico',
				'industrial air filters',
				'filtration systems',
				'air quality',
				'professional filters',
				'NEBB validation',
				'ISO 14644 cleanrooms',
				'particle control'
			]}
			alternateLanguages={[
				{ lang: 'es', url: siteUrl },
				{ lang: 'x-default', url: siteUrl }
			]}
		/>

		<!-- Organization Schema -->
		<script type="application/ld+json" set:html={JSON.stringify(generateOrganizationSchema(siteUrl))} />
		
		<!-- FAQ Schema -->
		<script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
	</head>

	<body>
		<HeroSection />
		<Stats />
		<BentoGrid />
		<IndustriesBenefitSection />
		<LogoSection />
		<CertificationSection />
		<FaqSection />
		<TestimonialSections />
		<FooterSection />
		<WhatsAppButton />
	</body>
</html>
