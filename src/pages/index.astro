---
import '../styles/global.css';
import SEO from '@/components/shared/SEO.astro';
import HeroSection from '@/components/shared/HeroSection.astro';
import Stats from '@/components/shared/Stats.astro';
import BentoGrid from '@/components/shared/BentoGrid.astro';
import LogoSection from '@/components/shared/LogoSection.astro';
import CertificationSection from '@/components/shared/CertificationSection.astro';
import TestimonialSections from '@/components/shared/TestimonialSections.astro';
import FaqSection from '@/components/shared/FaqSection.astro';
import FooterSection from '@/components/shared/FooterSection.astro';
import WhatsAppButton from '@/components/shared/WhatsAppButton.astro';
import { generateOrganizationSchema, generateFAQSchema } from '@/lib/seo-utils';
import { useTranslations } from '@/i18n/utils';

const siteUrl = Astro.site?.href || Astro.url.origin;
const t = useTranslations('es');

// Generar FAQs para schema
const faqs = Array.from({ length: 7 }, (_, index) => {
  const question = t(`faq.q${index + 1}`);
  const answer = t(`faq.a${index + 1}`);
  return question && answer ? { question, answer } : null;
}).filter(Boolean);

const faqSchema = generateFAQSchema(faqs);
---

<html lang="es">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		
		<SEO 
			title="Líder en Cuartos Limpios y Filtros Industriales | Star Filters"
			description="Con más de 40 años de experiencia, Star Filters es líder en diseño y construcción de cuartos limpios, filtros HEPA y sistemas de filtración industrial en Norteamérica. Validación NEBB, calidad certificada y soporte técnico profesional."
			ogType="website"
			keywords={[
				'filtros industriales',
				'filtros HEPA',
				'cuartos limpios',
				'purificación de aire',
				'filtros México',
				'filtros de aire industrial',
				'sistemas de filtración',
				'calidad del aire',
				'filtros profesionales',
				'validación NEBB',
				'cuartos limpios ISO 14644',
				'control de partículas'
			]}
			alternateLanguages={[
				{ lang: 'en', url: `${siteUrl}/en/` },
				{ lang: 'x-default', url: siteUrl }
			]}
		/>
		
		<!-- Organization Schema -->
		<script type="application/ld+json" set:html={JSON.stringify(generateOrganizationSchema(siteUrl))} />
		
		<!-- FAQ Schema -->
		<script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
	</head>

	<body>
		<HeroSection />
		<Stats />
		<BentoGrid />
		<LogoSection />
		<CertificationSection />
		<FaqSection />
		<TestimonialSections />
		<FooterSection />
		<WhatsAppButton />
	</body>
</html>
